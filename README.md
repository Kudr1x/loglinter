# loglinter

**–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é Backend-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞. Golang**

–õ–∏–Ω—Ç–µ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥-–∑–∞–ø–∏—Å–µ–π –≤ Go-–∫–æ–¥–µ. –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø–ª–∞–≥–∏–Ω –¥–ª—è golangci-lint.

## –û–ø–∏—Å–∞–Ω–∏–µ

–õ–∏–Ω—Ç–µ—Ä –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª–æ–≥-–∑–∞–ø–∏—Å–∏ –≤ –∫–æ–¥–µ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º. –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫—É —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ª–æ–≥–∏.

## –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. –õ–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å–æ —Å—Ç—Ä–æ—á–Ω–æ–π –±—É–∫–≤—ã

```go
// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
log.Info("Starting server on port 8080")
slog.Error("Failed to connect to database")

// –ü—Ä–∞–≤–∏–ª—å–Ω–æ
log.Info("starting server on port 8080")
slog.Error("failed to connect to database")
```

### 2. –õ–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ

```go
// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
log.Info("–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞")
log.Error("–æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö")

// –ü—Ä–∞–≤–∏–ª—å–Ω–æ
log.Info("starting server")
log.Error("failed to connect to database")
```

### 3. –õ–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã –∏–ª–∏ —ç–º–æ–¥–∑–∏

```go
// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
log.Info("server started! üöÄ")
log.Error("connection failed!!!")
log.Warn("warning: something went wrong...")

// –ü—Ä–∞–≤–∏–ª—å–Ω–æ
log.Info("server started")
log.Error("connection failed")
log.Warn("something went wrong")
```

### 4. –õ–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```go
// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
log.Info("user password: " + password)
log.Debug("api_key=" + apiKey)
log.Info("token: " + token)

// –ü—Ä–∞–≤–∏–ª—å–Ω–æ
log.Info("user authenticated successfully")
log.Debug("api request completed")
log.Info("token validated")
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –Ø–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: Go 1.22+
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø–ª–∞–≥–∏–Ω –¥–ª—è golangci-lint
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ª–æ–≥–≥–µ—Ä—ã:
  - `log/slog`
  - `go.uber.org/zap`

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/Kudr1x/loglinter.git
cd loglinter
make build
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —Ñ–∞–π–ª –ø–ª–∞–≥–∏–Ω–∞ `loglinter.so`.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å golangci-lint

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.golangci.yml`:

```yaml
linters:
  enable:
    - loglinter

linters-settings:
  custom:
    loglinter:
      path: /path/to/loglinter.so
      description: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É:

```bash
golangci-lint run
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.loglinter.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª:

```json
{
  "sensitive_words": [
    "password",
    "token",
    "secret",
    "api_key",
    "apikey",
    "credential"
  ],
  "patterns": [
    "\\d{4}-\\d{4}-\\d{4}-\\d{4}"
  ]
}
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- `sensitive_words` - —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è –≤ –ª–æ–≥–∞—Ö —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- `patterns` - —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ–º–µ—Ä–∞ –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö –∫–∞—Ä—Ç)

–ï—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–õ–∏–Ω—Ç–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ—à–∏–±–æ–∫:

```bash
golangci-lint run --fix
```

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è:
- –ó–∞–≥–ª–∞–≤–Ω–∞—è –±—É–∫–≤–∞ –≤ –Ω–∞—á–∞–ª–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–æ—á–Ω—É—é)
- –°–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã –∏ —ç–º–æ–¥–∑–∏ (—É–¥–∞–ª—è—é—Ç—Å—è)

–¢—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ
- –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ª–æ–≥–∞—Ö

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
make test
```

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º:
```bash
make lint
```

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
```bash
make lint_auto_fix
```

–°–±–æ—Ä–∫–∞ –ø–ª–∞–≥–∏–Ω–∞:
```bash
make build
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ pkg/analyzer/          # –ö–æ–¥ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ analyzer.go        # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª
‚îÇ   ‚îú‚îÄ‚îÄ config.go          # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ analyzer_test.go   # Unit-—Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ testdata/          # –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ plugin/                # –ü–ª–∞–≥–∏–Ω –¥–ª—è golangci-lint
‚îÇ   ‚îî‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ .golangci.yml          # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .loglinter.json        # –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ª–∏–Ω—Ç–µ—Ä–∞
‚îî‚îÄ‚îÄ Makefile               # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

–õ–∏–Ω—Ç–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ `golang.org/x/tools/go/analysis` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ AST –∫–æ–¥–∞. –û–Ω –Ω–∞—Ö–æ–¥–∏—Ç –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (Info, Error, Debug –∏ —Ç.–¥.) –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç (—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è) –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º.

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞—Ä—É—à–µ–Ω–∏—è –ª–∏–Ω—Ç–µ—Ä —Å–æ–æ–±—â–∞–µ—Ç —Ç–æ—á–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –≤ –∫–æ–¥–µ –∏, –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω–∏–∑–º SuggestedFixes.

## –≠—Ç–∞–ø—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- [x] –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [x] –≠—Ç–∞–ø 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫–∏
- [x] –≠—Ç–∞–ø 3: Unit-—Ç–µ—Å—Ç—ã –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- [x] –≠—Ç–∞–ø 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å golangci-lint –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –ë–æ–Ω—É—Å: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
- [x] –ë–æ–Ω—É—Å: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
- [x] –ë–æ–Ω—É—Å: –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [x] –ë–æ–Ω—É—Å: CI/CD —á–µ—Ä–µ–∑ GitHub Actions
